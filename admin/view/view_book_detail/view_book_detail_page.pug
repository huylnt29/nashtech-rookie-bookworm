extends ../global_layout.pug

block content   
     div
          div.flex.justify-between.items-center
               div.flex
                    i(class="material-icons w-8") book_5
                    p(class='font-bold text-xl text-slate-900 uppercase') #{book.name}
               +primary_button("Delete", "", "red")
          div.h-4
          p(class='font-bold text-lg text-gray-600 text-center') Images
          div.h-3
          div(class='bg-white p-8 shadow-lg shadow-slate-200 rounded-2xl')
               if book.imageUrls.length > 0
                    div.grid.grid-cols-5.place-items-center
                         each imageUrl in book.imageUrls
                              img(src=imageUrl).max-h-48
               else 
                    +announcement('../illustration_no_data.svg', 'You have not associated any book with this category')
          
          div.h-8
          p(class='font-bold text-lg text-gray-600 text-center') Basic information
          div.h-3
          div(class='bg-white py-3 px-8 shadow-lg shadow-slate-200 rounded-2xl')
               +row_text('id', book.id)
               +row_text('name', book.name, "openEditModal()")
               +row_text('created at', book.createdAt)
               +row_text('updated at', book.updatedAt)
          div.h-8
          p(class='font-bold text-lg text-gray-600 text-center') Authors
          div.h-3
          div(class='bg-white p-8 shadow-lg shadow-slate-200 rounded-2xl')
               if book.authors.length > 0
                    table.table.w-full
                         thead(class='table-header-group bg-slate-100')
                              tr.table-row
                                   th(class="table-cell text-left p-3") ID
                                   th(class="table-cell text-left") NAME
                                   th(class="table-cell text-left w-8")          
                         tbody.table-row-group
                              each author in book.authors
                                        tr(class="table-row hover:bg-slate-50 hover:cursor-pointer group")
                                             td(class="table-cell p-3", onclick=`navigateToBookDetailPage()`) #{book.id}
                                             td(class="table-cell", onclick=`navigateToBookDetailPage()`) #{book.name}
                                             td(class="table-cell")
                                                  i(class="material-icons hidden group-hover:block w-4", onclick=`removeBook(${book.id})`) delete
               else 
                    +announcement('../illustration_no_data.svg', 'You have not associated any book with this category')

          div.h-8
          p(class='font-bold text-lg text-gray-600 text-center') Description
          div.h-3
          div(class='bg-white p-8 shadow-lg shadow-slate-200 rounded-2xl')
               p(class='text-slate-900 whitespace-pre-wrap') #{book.description}
          div.h-8

     script(type='text/javascript').
          const removeBook = (id) => {
               axios.patch(`/book/${id}`, {
                    categoryId: null
               })
               .then(() => location.reload(true))
          }
     
     include edit_book_modal.pug
     include ../view_book_list/delete_book_modal.pug
