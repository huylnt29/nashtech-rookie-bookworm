extends ../global_layout.pug

block content
     include select_batch_menu.pug

     div
          div.flex.justify-between.items-center
               p.font-bold.text-xl.text-slate-900 CREATE DISCOUNT
               +primary_button("Submit", "submitCreateBatch()", "slate")
          div.flex.justify-start.items-start.gap-12.my-4.mb-12
               div(class='basis-1/3')
                    include create_discount_form.pug
               div(class='basis-2/3')
                    +select_batch_menu(batches, batch)
                    
     +toast('danger', 'create-discount-toast')

     script(type='text/javascript').
          var batchIds = []
          const pickBatch = (id) => {
               batchIds.push(id)
               u(`#batch-menu-item-${id}`).addClass("bg-slate-100 font-bold")
          }
          const submitCreateDiscount = () => {
               //- const initialQuantity = parseInt(u('#initialQuantity').nodes[0].value);
               //- const originalPrice = parseInt(u('#originalPrice').nodes[0].value);
               //- const price = parseInt(u('#price').nodes[0].value);
               //- let importedAt = u('#importedAt').nodes[0].value
               //- if (importedAt != '') importedAt = new Date(importedAt).toISOString();
               //- else importedAt = undefined
               //- axios.post('/batch', {
               //-      bookId,
               //-      initialQuantity,
               //-      originalPrice,
               //-      price,
               //-      importedAt,
               //- })
               //- .then(() => location.href = '/batch')
               //- .catch((error) => showToast(
               //-      '#create-batch-toast', 
               //-      error.response.data.message.toString()
               //- ));
          }